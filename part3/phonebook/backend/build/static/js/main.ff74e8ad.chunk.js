(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(14),o=t.n(r),u=t(4),i=t(2),l=function(e){return c.a.createElement("div",null,e.label,": ",c.a.createElement("input",{onChange:e.onChange,value:e.value}))},s=function(e){return c.a.createElement("form",{onSubmit:e.onSubmit},c.a.createElement(l,{label:"name",onChange:e.onNameChange,value:e.newName}),c.a.createElement(l,{label:"number",onChange:e.onNumChange,value:e.newNum}),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.message;return null===n.content?null:c.a.createElement("div",{className:"notification ".concat(n.type)},n.content)},f=function(e){return c.a.createElement("button",{onClick:e.onClick},"delete")},d=function(e){return c.a.createElement("p",null,e.person.name," ",e.person.number," ",c.a.createElement(f,{onClick:e.handleClick}))},h=function(e){return e.persons.map((function(n){return c.a.createElement(d,{key:n.id,person:n,handleClick:e.handleClick(n)})}))},p=t(3),b=t.n(p),E="/api/persons",v=function(){return b.a.get(E).then((function(e){return e.data}))},C=function(e){return b.a.post(E,e).then((function(e){return e.data}))},w=function(e,n){return b.a.put("".concat(E,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return b.a.delete("".concat(E,"/").concat(e)).then((function(e){return e.data}))},k=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),f=Object(i.a)(o,2),d=f[0],p=f[1],b=Object(a.useState)(""),E=Object(i.a)(b,2),k=E[0],j=E[1],O=Object(a.useState)(""),y=Object(i.a)(O,2),N=y[0],S=y[1],D=Object(a.useState)({content:null,type:"success"}),A=Object(i.a)(D,2),J=A[0],L=A[1];Object(a.useEffect)((function(){v().then((function(e){return r(e)}))}),[]);var P=function(e){return function(n){return e(n.target.value)}},x=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})),B=function(e){return setTimeout((function(){L(Object(u.a)(Object(u.a)({},J),{},{content:null}))}),e)};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(m,{message:J}),c.a.createElement(l,{label:"filter shown with",onChange:P(S),value:N}),c.a.createElement("h2",null,"Add new"),c.a.createElement(s,{onSubmit:function(e){e.preventDefault();var n={name:d,number:k},a=t.find((function(e){return e.name===d}));a?window.confirm("".concat(d," is already added to Phonebook, replace the old number with a new one?"))&&function(e,n){w(e,n).then((function(n){r(t.map((function(t){return t.id!==e?t:n}))),L({content:"Updated ".concat(n.name,"'s number"),type:"success"}),B(1500)})).catch((function(n){L({content:n.response.data.error,type:"error"}),B(1500),404===n.response.status&&r(t.filter((function(n){return n.id!==e})))}))}(a.id,n):C(n).then((function(e){r(t.concat(e)),L({content:"Added ".concat(e.name),type:"success"}),B(1500)})).catch((function(e){L({content:e.response.data.error,type:"error"}),B(1500)}));p(""),j("")},onNameChange:P(p),onNumChange:P(j),newName:d,newNum:k}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(h,{persons:x,handleClick:function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&g(e.id).then((function(){var n=t.filter((function(n){return n.id!==e.id}));r(n),L({content:"Deleted ".concat(e.name," from server"),type:"success"}),B(1500)})).catch((function(n){L({content:n.response.data.error,type:"error"}),B(1500),r(t.filter((function(n){return n.id!==e.id})))}))}}}))};t(37);o.a.render(c.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ff74e8ad.chunk.js.map